<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>آسمانی که ما را به هم رساند</title>
  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3-geo-projection/0.2.16/d3.geo.projection.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/ofrohn/d3-celestial/lib/celestial.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ofrohn/d3-celestial/lib/celestial.css">

  <style>
    body {
      background: #0d1b2a;
      color: #e0e1dd;
      font-family: 'Tahoma', sans-serif;
      text-align: center;
      margin: 0;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    #celestial-map {
      width: 600px;
      height: 600px;
      margin: 20px auto;
      border-radius: 50%;
      box-shadow: 0 0 50px rgba(255, 255, 255, 0.1);
      cursor: grab;
    }

    .message-box {
      z-index: 10;
      margin-top: -50px;
      pointer-events: none; /* کلیک‌ها از روی متن رد بشن */
    }

    h1 {
      font-weight: lighter;
      letter-spacing: 2px;
      margin-bottom: 5px;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }

    p {
      color: #778da9;
      font-size: 0.9em;
    }
  </style>
</head>
<body>

  <div id="celestial-map"></div>

  <div class="message-box">
    <h1>ستاره‌های شبِ آشنایی ما</h1>
    <p id="date-display">14 فوریه 2023 - تهران</p>
  </div>

  <script type="text/javascript">
    
    var config = {
      location: [35.6892, 51.3890], // مختصات تهران
      date: new Date("2023-02-14T20:00:00"), // تاریخ مورد نظر
      interactive: true,
      controls: false, 
      projection: "airy", 
      // *** تغییر مهم: استفاده از لینک CDN برای دیتا ***
      datapath: "https://cdn.jsdelivr.net/gh/ofrohn/d3-celestial/data/", 
      stars: {
        colors: true, 
        names: true, 
        style: { fill: "#ffffff", opacity: 1 }, 
        limit: 6, 
      },
      dsos: { show: false }, 
      constellations: {
        show: true, 
        names: true, 
        deselect: true,
        lineStyle: { stroke: "#cccccc", width: 1, opacity: 0.4 }, 
      },
      mw: {
        show: true, 
        style: { fill: "#ffffff", opacity: 0.12 }
      },
      background: { fill: "#0d1b2a", stroke: "#0d1b2a", opacity: 1 }, 
    };

    Celestial.display(config);
    
  </script>

</body>
</html>
