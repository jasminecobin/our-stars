<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>فرمول عشق ما</title>
  <style>
    /* تنظیمات صفحه: تمام صفحه و مشکی */
    body, html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background-color: #000000;
      font-family: 'Tahoma', sans-serif;
    }

    /* بوم نقاشی (Canvas) */
    canvas {
      display: block;
    }

    /* متنی که وسط قلب نشون داده میشه */
    .content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: white;
      pointer-events: none; /* موس از روش رد بشه و به ذرات بخوره */
      z-index: 10;
    }

    h1 {
      font-weight: 100;
      font-size: 2.5rem;
      text-shadow: 0 0 20px rgba(255, 20, 147, 0.8); /* سایه صورتی نئونی */
      margin: 0;
    }

    p {
      color: #ffb7b2;
      font-size: 1rem;
      margin-top: 10px;
      letter-spacing: 2px;
    }
  </style>
</head>
<body>

  <div class="content">
    <h1>[اسم او]</h1> <p>تو تنها منطقِ دنیایِ کدهای منی</p>
  </div>

  <canvas id="heart"></canvas>

  <script>
    /* اینجا جادوی ریاضی اتفاق میفته!
       ما از فرمول قلبی شکل استفاده میکنیم تا مکان ذرات رو تعیین کنیم.
    */
    
    window.requestAnimationFrame =
      window.requestAnimationFrame ||
      function (callback) {
        return window.setTimeout(callback, 1000 / 60);
      };

    var canvas = document.getElementById("heart");
    var ctx = canvas.getContext("2d");
    
    // تنظیم سایز کانواس
    var w = (canvas.width = window.innerWidth);
    var h = (canvas.height = window.innerHeight);
    
    // مقیاس قلب (بزرگی و کوچکی)
    var heartScale = window.innerWidth < 600 ? 150 : 250; 

    // تعداد ذرات (هر چی بیشتر، تراکم قلب بیشتر)
    var particleCount = window.innerWidth < 600 ? 2000 : 4000; 

    var particles = [];

    // فرمول ریاضی قلب:
    // x = 16 * sin(t)^3
    // y = 13 * cos(t) - 5 * cos(2*t) - 2 * cos(3*t) - cos(4*t)
    function getHeartPoint(factor) {
      var t = factor * Math.PI * 2;
      var x = 16 * Math.pow(Math.sin(t), 3);
      var y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
      
      // تبدیل مختصات ریاضی به مختصات صفحه نمایش
      return {
        x: x * (heartScale / 20) + w / 2, // وسط چین کردن افقی
        y: -y * (heartScale / 20) + h / 2  // وسط چین کردن عمودی (منفی چون محور y در کانواس برعکسه)
      };
    }

    // کلاس ذره (Particle Class)
    var Particle = function () {
      // مکان اولیه تصادفی
      this.x = Math.random() * w;
      this.y = Math.random() * h;
      
      // هدف نهایی (نقطه‌ای روی محیط قلب)
      var p = getHeartPoint(Math.random());
      this.targetX = p.x;
      this.targetY = p.y;
      
      // ویژگی‌های ظاهری
      this.shade = Math.floor(Math.random() * 50) + 320; // طیف رنگ صورتی/بنفش
      this.size = Math.random() * 2; // اندازه ذره
      this.speed = Math.random() * 0.05 + 0.02; // سرعت حرکت
    };

    Particle.prototype.update = function () {
      // حرکت نرم به سمت هدف (Interpolation)
      var dx = this.targetX - this.x;
      var dy = this.targetY - this.y;
      
      // هر چه نزدیک تر میشه آروم تر میشه
      this.x += dx * this.speed;
      this.y += dy * this.speed;
      
      // اضافه کردن لرزش (Jitter) برای اینکه زنده به نظر بیاد
      this.x += (Math.random() - 0.5) * 2;
      this.y += (Math.random() - 0.5) * 2;
    };

    Particle.prototype.draw = function () {
      ctx.fillStyle = "hsla(" + this.shade + ", 90%, 60%, 0.8)";
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fill();
    };

    // ساختن ذرات
    function init() {
      for (var i = 0; i < particleCount; i++) {
        particles.push(new Particle());
      }
    }

    // حلقه انیمیشن
    function loop() {
      // پاک کردن صفحه قبلی با کمی ردپا (برای افکت دنباله دار بودن)
      ctx.fillStyle = "rgba(0, 0, 0, 0.1)";
      ctx.fillRect(0, 0, w, h);

      // آپدیت و رسم همه ذرات
      for (var i = 0; i < particles.length; i++) {
        particles[i].update();
        particles[i].draw();
      }
      
      requestAnimationFrame(loop);
    }

    // مدیریت تغییر سایز پنجره
    window.onresize = function() {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
    };

    // شروع
    init();
    loop();

  </script>
</body>
</html>
